<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>David Gaines | Creative Director Portfolio</title>
    <script>
      (function() {
        const path = window.location.pathname;
        const hash = window.location.hash;
        if (path && path !== '/' && !hash) {
          window.location.replace('/#' + path + window.location.search);
        }
      })();
    </script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='10' fill='%230f172a' /><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Inter, sans-serif' font-size='50' font-weight='900' fill='%23f8fafc'>GD!</text></svg>" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
      body.hide-cursor, body.hide-cursor html {
        cursor: none;
      }
      body.hide-cursor a, body.hide-cursor button, body.hide-cursor [role="button"], body.hide-cursor input, body.hide-cursor textarea, body.hide-cursor select {
        cursor: none;
      }
      .text-textured {
        background-image: url('https://images.unsplash.com/photo-1564288819588-6db0b59c4a84?q=80&w=1000&auto=format&fit=crop');
        background-size: cover;
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
      }
      /* Style for the sticky header to enable cursor blend effect */
      .header-with-blur::before {
        content: '';
        position: absolute;
        inset: 0;
        z-index: -1;
        background-color: rgba(15, 23, 42, 0.8); /* Corresponds to bg-base-dark/80 */
        -webkit-backdrop-filter: blur(12px); /* Corresponds to backdrop-blur-lg */
        backdrop-filter: blur(12px);
      }
      .logo-dragging {
        opacity: 0.5;
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(8, 145, 178, 0.7);
      }
    </style>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              'brand-primary': 'var(--brand-primary, #0891b2)', 
              'brand-secondary': 'var(--brand-secondary, #f0f9ff)', 
              'base-dark': '#0f172a', // Slate 900
              'base-medium': '#1e293b', // Slate 800
              'base-light': '#334155', // Slate 700
              'text-primary': '#f8fafc', // Slate 50
              'text-secondary': '#cbd5e1', // Slate 300
              'text-tertiary': '#94a3b8', // Slate 400
            },
            animation: {
              'fade-in-up': 'fade-in-up 0.6s ease-out forwards',
              'infinite-scroll-left': 'infinite-scroll-left 60s linear infinite',
              'infinite-scroll-right': 'infinite-scroll-right 60s linear infinite',
            },
            keyframes: {
              'fade-in-up': {
                '0%': { opacity: '0', transform: 'translateY(20px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              },
              'infinite-scroll-left': {
                '0%': { transform: 'translateX(0)' },
                '100%': { transform: 'translateX(-50%)' },
              },
              'infinite-scroll-right': {
                '0%': { transform: 'translateX(-50%)' },
                '100%': { transform: 'translateX(0)' },
              },
            }
          }
        }
      }
    </script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="importmap">
{
  "imports": {
    "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.0/client",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "firebase/app": "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js",
    "firebase/auth": "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js",
    "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js"
  }
}
</script>
</head>
  <body class="bg-base-dark text-text-primary font-sans">
    <div id="root"></div>
    <script type="text/babel" data-type="module">
import React from 'react';
import ReactDOM from 'react-dom/client';
import { initializeApp } from 'firebase/app';
import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from 'firebase/auth';
import { getFirestore, doc, setDoc, onSnapshot } from 'firebase/firestore';

const { useState, useEffect, createContext, useContext, useRef, Component } = React;

// --- Inlined from constants.ts ---
const CLIENT_LOGOS = [
    'https://logo.clearbit.com/transistor.fm', 'https://logo.clearbit.com/reform.app', 'https://logo.clearbit.com/tuple.app', 'https://logo.clearbit.com/savvycal.com', 'https://logo.clearbit.com/statamic.com', 'https://logo.clearbit.com/google.com', 'https://logo.clearbit.com/laravel.com', 'https://logo.clearbit.com/miragejs.com', 'https://logo.clearbit.com/workcation.com', 'https://logo.clearbit.com/microsoft.com', 'https://logo.clearbit.com/vercel.com', 'https://logo.clearbit.com/github.com', 'https://logo.clearbit.com/meta.com', 'https://logo.clearbit.com/intel.com', 'https://logo.clearbit.com/sentry.io', 'https://logo.clearbit.com/mailchimp.com', 'https://logo.clearbit.com/notion.so', 'https://logo.clearbit.com/atlassian.com', 'https://logo.clearbit.com/asana.com', 'https://logo.clearbit.com/loom.com', 'https://logo.clearbit.com/framer.com', 'https://logo.clearbit.com/figma.com', 'https://logo.clearbit.com/dribbble.com', 'https://logo.clearbit.com/hubspot.com', 'https://logo.clearbit.com/shopify.com', 'https://logo.clearbit.com/intercom.com', 'https://logo.clearbit.com/slack.com', 'https://logo.clearbit.com/stripe.com', 'https://logo.clearbit.com/airbnb.com', 'https://logo.clearbit.com/netflix.com',
];
const BRAND_LOGOS = [
    'https://logo.clearbit.com/sony.com', 'https://logo.clearbit.com/nike.com', 'https://logo.clearbit.com/cocacola.com', 'https://logo.clearbit.com/netflix.com', 'https://logo.clearbit.com/spotify.com', 'https://logo.clearbit.com/playstation.com', 'https://logo.clearbit.com/nintendo.com', 'https://logo.clearbit.com/lego.com', 'https://logo.clearbit.com/redbull.com', 'https://logo.clearbit.com/starbucks.com', 'https://logo.clearbit.com/disney.com', 'https://logo.clearbit.com/amazon.com', 'https://logo.clearbit.com/apple.com', 'https://logo.clearbit.com/tesla.com', 'https://logo.clearbit.com/mcdonalds.com',
];
const HERO_PROJECTS = [
  { id: 'mlb-the-show', title: 'MLB The Show Franchise', subtitle: 'Case Study: Global Brand Launch & Retail Success', heroImage: 'https://picsum.photos/seed/mlb/1200/800', challenge: 'Launch a new flagship sports gaming franchise to compete against established market giants and capture the attention of a diverse audience, from hardcore baseball fans to casual gamers. This required a multi-faceted approach to build hype and establish a strong brand identity from day one.', strategy: 'Directed a multi-disciplinary creative effort, structuring and managing in-house teams, external agencies, and freelance talent. We developed a cohesive, cross-channel campaign spanning broadcast TV, dynamic retail displays, packaging, and high-impact tradeshow experiences to create an unmissable launch event.', impact: 'Achieved record-breaking launch sales, surpassing initial projections by 40%. Secured #1 market share in the genre within the first year and established a franchise that has shown incredible longevity, winning multiple "Game of the Year" awards.', processImages: ['https://picsum.photos/seed/mlb-process1/600/400', 'https://picsum.photos/seed/mlb-process2/600/400', 'https://picsum.photos/seed/mlb-process3/600/400'], client: 'Sony PlayStation', tags: ['Packaging', 'Broadcast TV', 'Retail', 'Trade Show'], description2: "The campaign's success was built on a deep understanding of the target audience. We combined authentic baseball simulation with high-energy, accessible marketing that spoke to both hardcore fans and newcomers. The retail presence was particularly crucial, with custom displays and interactive kiosks that allowed players to experience the game firsthand. This hands-on approach, coupled with a massive broadcast push, cemented MLB The Show as the premier baseball gaming experience.", galleryImages: ['https://picsum.photos/seed/mlb-gallery1/1200/800', 'https://picsum.photos/seed/mlb-gallery2/1200/800', 'https://picsum.photos/seed/mlb-gallery3/1200/800'], footerImages: ['https://picsum.photos/seed/mlb-footer1/400/1200', 'https://picsum.photos/seed/mlb-footer2/400/1200', 'https://picsum.photos/seed/mlb-footer3/400/1200'], galleryImageCount: 3, layout: '1' },
  { id: 'atari-revival', title: 'Interplay/Atari Launches', subtitle: 'Case Study: Revitalizing Legacy Brands for a Modern Audience', heroImage: 'https://picsum.photos/seed/atari/1200/800', challenge: "Re-introduce iconic gaming brands to a new generation of players while honoring the nostalgic connection of the original fanbase. The goal was to bridge the gap between retro appeal and modern gaming expectations.", strategy: 'As the agency-of-record creative lead, I developed a "Modern Nostalgia" creative platform. This involved a complete visual identity refresh, innovative packaging that paid homage to the originals, and digital campaigns that leveraged retro aesthetics within contemporary channels.', impact: 'Successfully managed creative for 5+ major title launches, resulting in a 300% increase in brand engagement on social media and strong sales in a competitive market. The campaigns were praised for their authentic yet fresh approach to beloved IP.', processImages: ['https://picsum.photos/seed/atari-process1/600/400', 'https://picsum.photos/seed/atari-process2/600/400', 'https://picsum.photos/seed/atari-process3/600/400'], client: 'Atari / Interplay', tags: ['Brand Identity', 'Packaging', 'Digital Campaign', 'Social Media'], description2: "The key to this project was striking the perfect balance between honoring the past and appealing to the present. We dove deep into the archives to extract core visual elements—pixel art, typography, color palettes—and reinterpreted them for a high-definition world. The result was a brand identity that felt instantly familiar yet undeniably fresh, capturing the imagination of both old-school gamers and a new generation.", galleryImages: ['https://picsum.photos/seed/atari-gallery1/1200/800', 'https://picsum.photos/seed/atari-gallery2/1200/800', 'https://picsum.photos/seed/atari-gallery3/1200/800'], footerImages: ['https://picsum.photos/seed/atari-footer1/400/1200', 'https://picsum.photos/seed/atari-footer2/400/1200', 'https://picsum.photos/seed/atari-footer3/400/1200'], galleryImageCount: 3, layout: '2' },
  { id: 'aura-health', title: 'Aura Health - Medical Device Launch', subtitle: 'Developed a trustworthy and accessible brand identity and patient portal UI/UX, simplifying complex medical information.', heroImage: 'https://picsum.photos/seed/aura/800/600', challenge: 'Challenge details for Aura Health...', strategy: 'Strategy details for Aura Health...', impact: 'Impact details for Aura Health...', processImages: [], galleryImages: [], footerImages: [], layout: '3', },
  { id: 'elysian-beauty', title: 'Elysian Beauty - Cosmetics Line', subtitle: 'Created elegant packaging and a cohesive digital campaign that navigated complex cosmetic regulations while appealing to a luxury market.', heroImage: 'https://picsum.photos/seed/elysian/800/600', challenge: 'Challenge details for Elysian Beauty...', strategy: 'Strategy details for Elysian Beauty...', impact: 'Impact details for Elysian Beauty...', processImages: [], galleryImages: [], footerImages: [], layout: '2', },
  { id: 'nomad-escapes', title: 'Nomad Escapes - Travel Booking', subtitle: 'Designed a mobile-first booking platform focused on intuitive user flow and immersive destination visuals to drive conversions.', heroImage: 'https://picsum.photos/seed/nomad/800/600', challenge: 'Challenge details for Nomad Escapes...', strategy: 'Strategy details for Nomad Escapes...', impact: 'Impact details for Nomad Escapes...', processImages: [], galleryImages: [], footerImages: [], layout: '2', },
  { id: 'streamline-corp', title: 'Streamline - B2B SaaS', subtitle: 'Led the creative for a B2B platform launch, focusing on clear value propositions and a professional, data-driven aesthetic.', heroImage: 'https://picsum.photos/seed/streamline/800/600', challenge: 'Challenge details for Streamline...', strategy: 'Strategy details for Streamline...', impact: 'Impact details for Streamline...', processImages: [], galleryImages: [], footerImages: [], layout: '2', },
];
const ABOUT_ME = {
  name: 'David Gaines', title: 'Creative Director & Brand Strategist', heroImage: 'https://images.unsplash.com/photo-1560250097-0b93528c311a?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', introStatement: "A highly accomplished Creative Leader with 20+ years of experience solving complex marketing challenges by leading and mentoring creative teams. Committed to elevating craft standards and translating brand strategy into high-impact digital-first concepts.", heroIntro: "A creative leader translating complex brand strategy into high-impact, pixel-perfect design across digital, print, and retail experiences.", philosophy: [{ title: 'Strategy-Driven Creative', text: 'I believe great creative is driven by strategic insight, not just aesthetics. My process begins with understanding the business challenge to ensure every design choice has a purpose and delivers measurable results.' }, { title: 'Mentorship & Team Building', text: "My role as a leader is to mentor the next generation of creatives. I focus on building collaborative, empowered teams where talent can thrive and produce their best work." }, { title: 'Bridging Complexity and User Experience', text: "I specialize in bridging complicated technical requirements with compelling user experiences, translating product features into emotional connections that resonate with audiences." },], obsessions: ['Swiss Typography', 'Japanese Denim', 'Vintage Synthesizers', 'Perfect Espresso', 'Mid-Century Furniture', 'Film Photography'], travelLog: ['Tokyo, Japan', 'Reykjavik, Iceland', 'Berlin, Germany', 'Kyoto, Japan', 'Mexico City', 'Copenhagen, Denmark', 'Buenos Aires', 'Seoul, South Korea', 'Lisbon, Portugal'], quotes: [{ text: "Good design is as little design as possible.", author: "Dieter Rams" }, { text: "The details are not the details. They make the design.", author: "Charles Eames" }], favorites: { movies: ['Blade Runner 2049', 'Arrival', 'Grand Budapest Hotel'], shows: ['Severance', 'The Bear', 'Succession'], podcasts: ['99% Invisible', 'Design Matters', 'How I Built This'], audiobooks: ['The Creative Act', 'Steve Jobs', 'Kitchen Confidential'] }, panoramaImage: 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?q=80&w=2000&auto=format&fit=crop', inspirationGrid: ['https://images.unsplash.com/photo-1513364776144-60967b0f800f?q=80&w=1200&auto=format&fit=crop', 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=1200&auto=format&fit=crop', 'https://images.unsplash.com/photo-1497215728101-856f4ea42174?q=80&w=1200&auto=format&fit=crop', 'https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?q=80&w=1200&auto=format&fit=crop', 'https://images.unsplash.com/photo-1605106702842-01a887a31122?q=80&w=1200&auto=format&fit=crop', 'https://images.unsplash.com/photo-1502945015378-0e284ca1a5be?q=80&w=1200&auto=format&fit=crop'], resumeUrl: '#', linkedInUrl: 'https://linkedin.com/in/davidrgaines', email: 'dave@gainesdg.com', phone: '949.463.1867', brandPrimary: '#0891b2', brandSecondary: '#f0f9ff'
};

// --- Inlined from lib/firebase.ts ---
const firebaseConfig = { apiKey: "AIzaSyDAaX8so7wzwuhuWHeNN8CXWfHnXx9dREQ", authDomain: "port-82839.firebaseapp.com", projectId: "port-82839", storageBucket: "port-82839.firebasestorage.app", messagingSenderId: "463866065220", appId: "1:463866065220:web:775b841f67d43b64e8a711" };
const isConfigured = firebaseConfig.apiKey && !firebaseConfig.apiKey.startsWith("PASTE_");
let app = null, auth = null, db = null;
if (isConfigured) {
  try {
    app = initializeApp(firebaseConfig);
    auth = getAuth(app);
    db = getFirestore(app);
  } catch (error) {
    console.error("Firebase initialization failed.", error);
  }
}

// --- Inlined from hooks/useRouter.ts ---
const useRouter = () => {
  const [path, setPath] = useState(window.location.hash || '#/');
  useEffect(() => {
    const onHashChange = () => {
      setPath(window.location.hash || '#/');
      window.scrollTo(0, 0);
    };
    window.addEventListener('hashchange', onHashChange);
    window.scrollTo(0, 0);
    return () => window.removeEventListener('hashchange', onHashChange);
  }, []);
  return { path };
};

// --- Inlined from components/ui/CustomCursor.tsx ---
const CursorHoverContext = createContext(undefined);
const useCursorHover = () => {
  const context = useContext(CursorHoverContext);
  if (!context) throw new Error('useCursorHover must be used within a CursorHoverProvider');
  return context;
};
const CursorHoverProvider = ({ children }) => {
  const [hoverState, setHoverState] = useState({ isHovering: false, text: undefined });
  const value = { hoverState, setHoverState };
  return <CursorHoverContext.Provider value={value}>{children}</CursorHoverContext.Provider>;
};
const CustomCursor = () => {
    const { hoverState } = useCursorHover();
    const { isHovering, text } = hoverState;
    const [position, setPosition] = useState({ x: -100, y: -100 });
    const tailRef = useRef(null);
    const mousePositionRef = useRef({ x: -100, y: -100 });
    const hoverStateRef = useRef(hoverState);
    const physicsRef = useRef({ x: -100, y: -100, vx: 0, vy: 0, scale: 1, vScale: 0 });
    const animationFrameRef = useRef(null);
    const STIFFNESS = 0.15, DAMPING = 0.75, SCALE_STIFFNESS = 0.1, SCALE_DAMPING = 0.8;

    useEffect(() => { hoverStateRef.current = hoverState; }, [hoverState]);
    useEffect(() => {
        const startX = window.innerWidth / 2, startY = window.innerHeight / 2;
        mousePositionRef.current = { x: startX, y: startY };
        setPosition({ x: startX, y: startY });
        physicsRef.current.x = startX;
        physicsRef.current.y = startY;
        
        const handleMouseMove = (e) => {
            mousePositionRef.current = { x: e.clientX, y: e.clientY };
            setPosition({ x: e.clientX, y: e.clientY });
        };
        const handleMouseLeave = () => {
          mousePositionRef.current = { x: -100, y: -100 };
          setPosition({ x: -100, y: -100 });
        }
        window.addEventListener('mousemove', handleMouseMove);
        document.documentElement.addEventListener('mouseleave', handleMouseLeave);

        const updateCursor = () => {
            const phys = physicsRef.current, target = mousePositionRef.current, currentHoverState = hoverStateRef.current;
            const dx = target.x - phys.x, dy = target.y - phys.y;
            phys.vx += dx * STIFFNESS;
            phys.vy += dy * STIFFNESS;
            phys.vx *= DAMPING;
            phys.vy *= DAMPING;
            phys.x += phys.vx;
            phys.y += phys.vy;

            const targetScale = currentHoverState.text ? 1.5 : (currentHoverState.isHovering ? 0.5 : 1);
            const dScale = targetScale - phys.scale;
            phys.vScale += dScale * SCALE_STIFFNESS;
            phys.vScale *= SCALE_DAMPING;
            phys.scale += phys.vScale;

            if (tailRef.current) {
                tailRef.current.style.transform = `translate(${phys.x}px, ${phys.y}px) translate(-50%, -50%) scale(${phys.scale})`;
            }
            animationFrameRef.current = requestAnimationFrame(updateCursor);
        };
        animationFrameRef.current = requestAnimationFrame(updateCursor);

        return () => {
            window.removeEventListener('mousemove', handleMouseMove);
            document.documentElement.removeEventListener('mouseleave', handleMouseLeave);
            if (animationFrameRef.current) cancelAnimationFrame(animationFrameRef.current);
        };
    }, []);

    const hasText = !!text;
    return (
        <div className="custom-cursor-container pointer-events-none fixed inset-0 z-[9999] hidden md:block">
            <div ref={tailRef} className={`absolute w-8 h-8 rounded-full transition-colors duration-300 flex items-center justify-center ${(isHovering || hasText) ? 'bg-white' : 'border border-gray-400'}`} style={{ top: 0, left: 0, willChange: 'transform' }}>
              {hasText && <span className="text-[5px] font-bold text-base-dark tracking-widest uppercase">{text}</span>}
            </div>
            <div className={`absolute w-2 h-2 rounded-full bg-brand-primary transition-transform duration-200 ease-out`} style={{ left: `${position.x}px`, top: `${position.y}px`, transform: `translate(-50%, -50%) scale(${isHovering || hasText ? 0 : 1})`, willChange: 'transform' }} />
        </div>
    );
};

// --- Inlined from context/ContentContext.tsx ---
const ContentContext = createContext(undefined);
const useContent = () => {
  const context = useContext(ContentContext);
  if (!context) throw new Error('useContent must be used within a ContentProvider');
  return context;
};
const ContentProvider = ({ children }) => {
  const [heroProjects, setHeroProjects] = useState(HERO_PROJECTS);
  const [aboutMe, setAboutMe] = useState(ABOUT_ME);
  const [clientLogos, setClientLogos] = useState(CLIENT_LOGOS);
  const [brandLogos, setBrandLogos] = useState(BRAND_LOGOS);
  const [isFirebaseActive, setIsFirebaseActive] = useState(false);
  const [isAuthenticated, setIsAuthenticated] = useState(false);

  const mergeAboutMeData = (partialData) => ({
    ...ABOUT_ME, ...partialData,
    philosophy: Array.isArray(partialData.philosophy) ? partialData.philosophy : ABOUT_ME.philosophy,
    obsessions: Array.isArray(partialData.obsessions) ? partialData.obsessions : ABOUT_ME.obsessions,
    travelLog: Array.isArray(partialData.travelLog) ? partialData.travelLog : ABOUT_ME.travelLog,
    quotes: Array.isArray(partialData.quotes) ? partialData.quotes : ABOUT_ME.quotes,
    favorites: (typeof partialData.favorites === 'object' && partialData.favorites !== null) ? { ...ABOUT_ME.favorites, ...partialData.favorites } : ABOUT_ME.favorites,
    inspirationGrid: Array.isArray(partialData.inspirationGrid) ? partialData.inspirationGrid : ABOUT_ME.inspirationGrid,
  });

  useEffect(() => {
    try {
      const storedProjects = localStorage.getItem('heroProjects');
      if (storedProjects) { const parsed = JSON.parse(storedProjects); if (Array.isArray(parsed)) setHeroProjects(parsed); }
      const storedAboutMe = localStorage.getItem('aboutMe');
      if (storedAboutMe) { const parsed = JSON.parse(storedAboutMe); if (typeof parsed === 'object' && parsed !== null) setAboutMe(mergeAboutMeData(parsed)); }
      const storedClientLogos = localStorage.getItem('clientLogos');
      if (storedClientLogos) { const parsed = JSON.parse(storedClientLogos); if (Array.isArray(parsed)) setClientLogos(parsed); }
      const storedBrandLogos = localStorage.getItem('brandLogos');
      if (storedBrandLogos) { const parsed = JSON.parse(storedBrandLogos); if (Array.isArray(parsed)) setBrandLogos(parsed); }
    } catch (error) {
      console.error("Failed to parse localStorage data.", error);
      localStorage.clear();
    }

    if (auth) onAuthStateChanged(auth, (user) => setIsAuthenticated(!!user));

    if (db) {
      setIsFirebaseActive(true);
      const unsubProjects = onSnapshot(doc(db, 'content', 'heroProjects'), (doc) => {
        const data = doc.data()?.data;
        if (doc.exists() && Array.isArray(data)) setHeroProjects(data);
      });
      const unsubAbout = onSnapshot(doc(db, 'content', 'aboutMe'), (doc) => {
        const data = doc.data()?.data;
        if (doc.exists() && typeof data === 'object' && data !== null) setAboutMe(mergeAboutMeData(data));
      });
      const unsubLogos = onSnapshot(doc(db, 'content', 'logos'), (doc) => {
        if (doc.exists()) {
          const data = doc.data();
          if (Array.isArray(data.clientLogos)) setClientLogos(data.clientLogos);
          if (Array.isArray(data.brandLogos)) setBrandLogos(data.brandLogos);
        }
      });
      return () => { unsubProjects(); unsubAbout(); unsubLogos(); };
    }
  }, []);
  
  useEffect(() => {
    document.documentElement.style.setProperty('--brand-primary', aboutMe.brandPrimary || '#0891b2');
    document.documentElement.style.setProperty('--brand-secondary', aboutMe.brandSecondary || '#f0f9ff');
  }, [aboutMe.brandPrimary, aboutMe.brandSecondary]);

  const persist = async (key, data, firestoreCollection = 'content') => {
    localStorage.setItem(key, JSON.stringify(data));
    if (db && isAuthenticated) {
      try {
        await setDoc(doc(db, firestoreCollection, key), { data });
      } catch (e) {
        console.error("Error saving to Firebase", e);
      }
    }
  };

  const updateAboutMe = (data) => { setAboutMe(data); persist('aboutMe', data); };
  const updateHeroProjects = (projects) => { setHeroProjects(projects); persist('heroProjects', projects); };
  
  const updateLogos = (newClientLogos, newBrandLogos) => {
    setClientLogos(newClientLogos);
    setBrandLogos(newBrandLogos);
    
    localStorage.setItem('clientLogos', JSON.stringify(newClientLogos));
    localStorage.setItem('brandLogos', JSON.stringify(newBrandLogos));

    if (db && isAuthenticated) {
        const docRef = doc(db, 'content', 'logos');
        setDoc(docRef, { clientLogos: newClientLogos, brandLogos: newBrandLogos })
            .catch(e => console.error("Error saving logos to Firebase", e));
    }
  };

  const resetToDefaults = () => {
    setHeroProjects(HERO_PROJECTS); setAboutMe(ABOUT_ME); setClientLogos(CLIENT_LOGOS); setBrandLogos(BRAND_LOGOS);
    localStorage.removeItem('heroProjects'); localStorage.removeItem('aboutMe'); localStorage.removeItem('clientLogos'); localStorage.removeItem('brandLogos');
    alert("Local data reset.");
  };

  return (
    <ContentContext.Provider value={{ heroProjects, aboutMe, clientLogos, brandLogos, updateAboutMe, updateHeroProjects, updateLogos, resetToDefaults, isFirebaseActive }}>
      {children}
    </ContentContext.Provider>
  );
};

// --- Inlined Components ---
const ArrowUpRightIcon = ({ className = "h-6 w-6" }) => (<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className={className}><path strokeLinecap="round" strokeLinejoin="round" d="M4.5 19.5 19.5 4.5M19.5 4.5v15M19.5 4.5h-15" /></svg>);
const LinkedInIcon = ({ className = "h-6 w-6" }) => (<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M20.5 2h-17A1.5 1.5 0 002 3.5v17A1.5 1.5 0 003.5 22h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0020.5 2zM8 19H5v-9h3zM6.5 8.25A1.75 1.75 0 118.25 6.5 1.75 1.75 0 016.5 8.25zM19 19h-3v-4.74c0-1.42-.6-1.93-1.38-1.93-.98 0-1.62.67-1.62 1.93V19h-3v-9h2.9v1.3a3.11 3.11 0 012.7-1.4c1.55 0 3.38 1.02 3.38 3.54z"></path></svg>);

const Header = () => {
  const { setHoverState } = useCursorHover();
  const { path } = useRouter();
  const handleHomeClick = (e) => { e.preventDefault(); window.location.hash = '#/'; };
  const handleAboutClick = (e) => { e.preventDefault(); window.location.hash = '#/about'; };

  return (
    <header className="sticky top-0 z-50 header-with-blur border-b border-base-light">
      <nav className="container mx-auto px-4 sm:px-6 lg:px-8"><div className="flex items-center justify-between h-16">
          <div className="flex-shrink-0 flex items-center gap-6"><a href="#/" onClick={handleHomeClick} className="text-xl font-black text-text-primary transition-transform duration-300 hover:scale-110" onMouseEnter={() => setHoverState({ isHovering: true })} onMouseLeave={() => setHoverState({ isHovering: false })}>GD!</a></div>
          <div className="hidden md:block"><div className="ml-10 flex items-baseline space-x-4">
              <a href="#/" onClick={handleHomeClick} className={`relative px-3 py-2 text-sm font-medium transition-colors ${path === '#/' || path === '' ? 'text-brand-primary' : 'text-text-secondary hover:text-text-primary'}`} onMouseEnter={() => setHoverState({ isHovering: true })} onMouseLeave={() => setHoverState({ isHovering: false })}>Home{(path === '#/' || path === '') && (<span className="absolute bottom-0 left-1/2 -translate-x-1/2 w-2/3 h-0.5 bg-brand-primary rounded-full"></span>)}</a>
              <a href="#/about" onClick={handleAboutClick} className={`relative px-3 py-2 text-sm font-medium transition-colors ${path === '#/about' ? 'text-brand-primary' : 'text-text-secondary hover:text-text-primary'}`} onMouseEnter={() => setHoverState({ isHovering: true })} onMouseLeave={() => setHoverState({ isHovering: false })}>About{path === '#/about' && (<span className="absolute bottom-0 left-1/2 -translate-x-1/2 w-2/3 h-0.5 bg-brand-primary rounded-full"></span>)}</a>
          </div></div>
      </div></nav>
      <div className="md:hidden bg-base-dark/95 backdrop-blur-md"><div className="px-2 pt-2 pb-3 space-y-1 sm:px-3 flex justify-center items-center"><div className="flex gap-4">
              <a href="#/" onClick={handleHomeClick} className={`relative px-3 py-2 text-sm font-medium ${path === '#/' || path === '' ? 'text-brand-primary' : 'text-text-secondary'}`}>Home</a>
              <a href="#/about" onClick={handleAboutClick} className={`relative px-3 py-2 text-sm font-medium ${path === '#/about' ? 'text-brand-primary' : 'text-text-secondary'}`}>About</a>
      </div></div></div>
    </header>
  );
};

const SectionHeader = ({ title, subtitle, titleClassName = 'text-text-primary' }) => (
  <div className="text-center mb-12 md:mb-16">
    {subtitle && <h2 className="text-sm font-bold text-brand-primary uppercase tracking-widest mb-2">{subtitle}</h2>}
    <p className={`text-3xl md:text-4xl font-bold tracking-tight ${titleClassName}`}>{title}</p>
  </div>
);

const HeroSection = () => {
  const { aboutMe } = useContent();
  return (
    <section className="relative pt-14 md:pt-24 pb-16 md:pb-20 text-center bg-base-dark">
      <div className="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <h1 className="text-4xl md:text-5xl lg:text-7xl font-black text-text-primary tracking-tighter uppercase">{aboutMe.name}</h1>
        <p className="mt-4 text-xl md:text-2xl text-brand-primary font-semibold">{aboutMe.title}</p>
        <p className="mt-6 max-w-2xl mx-auto text-lg text-text-secondary">{aboutMe.heroIntro}</p>
      </div>
    </section>
  );
};

const PartnersSection = ({ showBorders = false }) => {
  const { clientLogos, brandLogos } = useContent();
  const Marquee = ({ logos, direction, showBorders }) => {
    if (!logos || logos.length === 0) return null;
    const allLogos = [...logos, ...logos]; 
    const animationClass = direction === 'left' ? 'animate-infinite-scroll-left' : 'animate-infinite-scroll-right';
    return (
      <div className="w-full inline-flex flex-nowrap overflow-hidden [mask-image:_linear_gradient(to_right,transparent_0,_black_128px,_black_calc(100%-128px),transparent_100%)]">
        <ul className={`flex items-center justify-center md:justify-start [&_img]:max-w-none ${animationClass}`}>
          {allLogos.map((logo, index) => (
            <li key={index} className={`flex-shrink-0 w-48 h-16 flex justify-center items-center px-4 ${showBorders ? 'border border-gray-200' : ''}`} aria-hidden={true}>
              <img src={logo} alt="" className="max-w-full max-h-full object-contain hover:scale-110 transition-transform duration-300" />
            </li>
          ))}
        </ul>
      </div>
    );
  };
  return (
    <section className="pb-12 pt-12 bg-white">
        <div className="container mx-auto px-4 sm:px-6 lg:px-8">
            <h3 className="text-center text-xs font-bold text-gray-300 tracking-[0.25em] uppercase mb-6">CLIENTS</h3>
        </div>
        <div className="w-full flex flex-col gap-6 mb-6">
           <Marquee logos={clientLogos} direction="left" showBorders={showBorders} />
           <Marquee logos={brandLogos} direction="right" showBorders={showBorders} />
        </div>
        <div className="container mx-auto px-4 sm:px-6 lg:px-8">
            <h3 className="text-center text-xs font-bold text-gray-300 tracking-[0.25em] uppercase">BRANDS</h3>
        </div>
    </section>
  );
};

const WorkOverviewSection = () => {
  const { heroProjects } = useContent();
  const allProjects = heroProjects.map(p => ({ 
      id: p.id, 
      title: p.homePageTitle || p.title, 
      description: p.homePageSubtitle || p.subtitle, 
      image: p.homePageImage || p.heroImage 
  }));
  const WorkCard = ({ project, index }) => {
    const { setHoverState } = useCursorHover();
    const handleNavigation = (e) => { e.preventDefault(); window.location.hash = `#/project/${project.id}`; };
    const cardContent = (
      <>
        <img src={project.image} alt={project.title} className="w-full h-full object-cover" />
        <div className="absolute inset-0 bg-gradient-to-t from-black/90 to-transparent" />
        <div className="absolute bottom-0 left-0 p-6">
          <h3 className="text-xl font-bold text-text-primary">{project.title}</h3>
          <p className="text-text-secondary text-sm mt-1 max-w-sm">{project.description}</p>
        </div>
      </>
    );
    return (
      <a href={`#/project/${project.id}`} onClick={handleNavigation} className="group block relative overflow-hidden rounded-lg bg-base-medium shadow-lg aspect-[16/9] opacity-0 animate-fade-in-up" style={{ animationDelay: `${index * 100}ms` }} onMouseEnter={() => setHoverState({ isHovering: true, text: 'VIEW' })} onMouseLeave={() => setHoverState({ isHovering: false })}>{cardContent}</a>
    );
  };
  return (
    <section className="pt-20 pb-4 bg-white text-slate-900">
      <div className="container mx-auto px-4 sm:px-6 lg:px-8"><div className="flex flex-wrap justify-center -m-4">
        {allProjects.map((project, index) => (<div key={project.id} className="w-full md:w-1/2 lg:w-1/3 p-4"><WorkCard project={project} index={index} /></div>))}
      </div></div>
    </section>
  );
};

const HomePage = () => (
  <>
    <HeroSection />
    <WorkOverviewSection />
    <PartnersSection />
  </>
);

const AboutPage = () => {
  const { aboutMe } = useContent();
  const topRowImages = aboutMe.inspirationGrid ? aboutMe.inspirationGrid.slice(0, 3) : [];
  const bottomRowImages = aboutMe.inspirationGrid ? aboutMe.inspirationGrid.slice(3, 6) : [];

  return (
    <div className="bg-white text-slate-900 animate-fade-in-up pb-12">
      <section className="bg-base-dark pt-14 md:pt-24 pb-16 md:pb-20 overflow-hidden text-white"><div className="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
          <h1 className="text-5xl md:text-7xl font-black tracking-tighter uppercase mb-8">About Me <span className="text-brand-primary">&</span> <br/><span className="text-brand-primary">The Process</span></h1>
          <p className="text-xl md:text-2xl font-light text-slate-300 max-w-3xl leading-relaxed">{aboutMe.introStatement}</p>
      </div></section>
      <div className="container mx-auto px-4 sm:px-6 lg:px-8 max-w-5xl">
        <section className="py-16 md:py-24"><div className="flex flex-col md:flex-row gap-12 items-start">
              <div className="md:w-1/3 sticky top-24"><h2 className="text-sm font-bold text-brand-primary uppercase tracking-widest mb-4">My Philosophy</h2><p className="text-3xl md:text-4xl font-bold tracking-tight">Strategy, Mentorship, and a User-First Mindset.</p></div>
              <div className="md:w-2/3 space-y-8">
                {aboutMe.philosophy.map((item, index) => (
                  <div key={index}>
                    <h3 className="text-xl font-bold mb-2 text-slate-800">{item.title}</h3>
                    <p className="text-slate-600 leading-relaxed">{item.text}</p>
                  </div>
                ))}
              </div>
        </div></section>
      </div>

      <section className="bg-slate-50 py-16 md:py-24"><div className="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <div>
              <h2 className="text-sm font-bold text-brand-primary uppercase tracking-widest mb-4">INSPIRATION & INFLUENCE</h2>
              <p className="text-3xl md:text-4xl font-bold tracking-tight mb-8">Obsessions, Quotes, and a Visual Moodboard.</p>
              <div className="space-y-6">
                <div className="flex flex-wrap gap-2">
                  {aboutMe.obsessions.map(obsession => <span key={obsession} className="bg-brand-secondary text-brand-primary text-xs font-semibold px-3 py-1 rounded-full">{obsession}</span>)}
                </div>
                <div>
                  {aboutMe.quotes.map(quote => (<blockquote key={quote.author} className="relative italic text-slate-600 pl-4 border-l-4 border-slate-200"><p>{quote.text}</p><cite className="not-italic text-sm font-semibold text-slate-800">- {quote.author}</cite></blockquote>))}
                </div>
              </div>
            </div>
            <div className="grid grid-cols-2 gap-4">
                <div className="grid gap-4">{topRowImages.map((src, index) => <img key={index} className="h-auto max-w-full rounded-lg" src={src} alt={`Inspiration image ${index + 1}`} />)}</div>
                <div className="grid gap-4 mt-8">{bottomRowImages.map((src, index) => <img key={index} className="h-auto max-w-full rounded-lg" src={src} alt={`Inspiration image ${index + 4}`} />)}</div>
            </div>
          </div>
      </div></section>
      
      <section className="py-16 md:py-24 text-center"><div className="container mx-auto px-4 sm:px-6 lg:px-8 max-w-5xl">
          <h2 className="text-sm font-bold text-brand-primary uppercase tracking-widest mb-4">CONTACT & COLLABORATE</h2>
          <p className="text-3xl md:text-4xl font-bold tracking-tight mb-8">Let's build something great together.</p>
          <div className="flex justify-center items-center gap-6">
              <a href={`mailto:${aboutMe.email}`} className="bg-brand-primary text-white font-bold py-3 px-6 rounded-lg hover:bg-opacity-90 transition-colors">Email Me</a>
              <a href={aboutMe.linkedInUrl} target="_blank" rel="noopener noreferrer" className="text-slate-600 hover:text-brand-primary transition-colors"><LinkedInIcon className="w-8 h-8"/></a>
          </div>
      </div></section>

    </div>
  );
};

const ProjectDetailPage = () => {
  const { path } = useRouter();
  const { heroProjects } = useContent();
  const projectId = path.split('/')[2];
  const project = heroProjects.find(p => p.id === projectId);
  if (!project) return <div>Project not found. <a href="#/">Go home</a>.</div>;
  const { setHoverState } = useCursorHover();

  return (
    <div className="bg-white text-base-dark animate-fade-in-up">
      {/* Hero */}
      <section className="relative h-[60vh] md:h-[80vh] flex items-end justify-center text-center p-8 text-white bg-base-dark">
        <img src={project.heroImage} alt={project.title} className="absolute inset-0 w-full h-full object-cover opacity-30" />
        <div className="relative z-10">
          <h1 className="text-4xl md:text-6xl font-black tracking-tighter uppercase">{project.title}</h1>
          <p className="mt-2 md:mt-4 text-lg md:text-xl font-semibold text-brand-primary">{project.subtitle}</p>
        </div>
      </section>

      {/* Intro */}
      <section className="py-16 md:py-24"><div className="container mx-auto px-4 sm:px-6 lg:px-8 max-w-5xl">
        <div className="grid md:grid-cols-3 gap-12">
          <div className="md:col-span-1"><h2 className="text-sm font-bold text-brand-primary uppercase tracking-widest mb-2">The Challenge</h2><p className="text-lg text-slate-600">{project.challenge}</p></div>
          <div className="md:col-span-1"><h2 className="text-sm font-bold text-brand-primary uppercase tracking-widest mb-2">My Strategy</h2><p className="text-lg text-slate-600">{project.strategy}</p></div>
          <div className="md:col-span-1"><h2 className="text-sm font-bold text-brand-primary uppercase tracking-widest mb-2">The Impact</h2><p className="text-lg font-bold text-slate-800">{project.impact}</p></div>
        </div>
      </div></section>

      {/* Process Images */}
      {project.processImages && project.processImages.length > 0 && (
      <section className="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl"><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
        {project.processImages.map((img, i) => <img key={i} src={img} alt={`Process ${i+1}`} className="rounded-lg shadow-md w-full h-auto object-cover" />)}
      </div></section>
      )}

      {/* Description 2 */}
      {project.description2 && (
      <section className="py-16 md:py-24"><div className="container mx-auto px-4 sm:px-6 lg:px-8 max-w-3xl text-center">
        <p className="text-xl text-slate-700 leading-relaxed">{project.description2}</p>
      </div></section>
      )}
      
      {/* Gallery */}
      {project.galleryImages && project.galleryImages.length > 0 && (
        <section className="py-8"><div className="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
          <div className="grid grid-cols-1 gap-8">
            {project.galleryImages.map((img, i) => <img key={i} src={img} alt={`Gallery ${i+1}`} className="rounded-lg shadow-xl w-full h-auto object-cover" />)}
          </div>
        </div></section>
      )}
      
      {/* Footer Nav */}
      <section className="py-16 md:py-24"><div className="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <a href="#/" onClick={(e) => { e.preventDefault(); window.location.hash = '#/'; }} className="inline-flex items-center gap-2 text-sm font-bold text-brand-primary uppercase tracking-widest group" onMouseEnter={() => setHoverState({isHovering:true})} onMouseLeave={() => setHoverState({isHovering:false})}>
          <span>Back to All Projects</span>
          <ArrowUpRightIcon className="w-4 h-4 transition-transform group-hover:translate-x-1 group-hover:-translate-y-1" />
        </a>
      </div></section>
    </div>
  );
};

const AdminPage = () => {
    const { aboutMe, updateAboutMe, heroProjects, updateHeroProjects, clientLogos, brandLogos, updateLogos, resetToDefaults } = useContent();
    const [email, setEmail] = useState('');
    const [password, setPassword] = useState('');
    const [isAuthenticated, setIsAuthenticated] = useState(false);
    const [aboutMeJson, setAboutMeJson] = useState('');
    const [heroProjectsJson, setHeroProjectsJson] = useState('');
    const [logosJson, setLogosJson] = useState('');
    const [error, setError] = useState('');
    
    useEffect(() => {
        if (auth) {
            const unsubscribe = onAuthStateChanged(auth, user => {
                setIsAuthenticated(!!user);
            });
            return () => unsubscribe();
        }
    }, []);

    useEffect(() => {
      setAboutMeJson(JSON.stringify(aboutMe, null, 2));
      setHeroProjectsJson(JSON.stringify(heroProjects, null, 2));
      setLogosJson(JSON.stringify({ clientLogos, brandLogos }, null, 2));
    }, [aboutMe, heroProjects, clientLogos, brandLogos]);

    const handleLogin = async (e) => {
        e.preventDefault();
        setError('');
        if (!auth) { setError("Firebase not initialized."); return; }
        try {
            await signInWithEmailAndPassword(auth, email, password);
        } catch (err) {
            setError(err.message);
        }
    };
    
    const handleLogout = async () => {
      if (auth) await signOut(auth);
    };

    const handleSaveAboutMe = () => {
      try {
        const parsed = JSON.parse(aboutMeJson);
        updateAboutMe(parsed);
        alert('About Me data saved!');
      } catch (e) {
        alert('Invalid JSON for About Me data.');
      }
    };
    
    const handleSaveHeroProjects = () => {
      try {
        const parsed = JSON.parse(heroProjectsJson);
        updateHeroProjects(parsed);
        alert('Hero Projects data saved!');
      } catch (e) {
        alert('Invalid JSON for Hero Projects data.');
      }
    };

    const handleSaveLogos = () => {
      try {
        const parsed = JSON.parse(logosJson);
        if (parsed.clientLogos && parsed.brandLogos) {
          updateLogos(parsed.clientLogos, parsed.brandLogos);
          alert('Logos data saved!');
        } else {
          alert('Invalid JSON structure for Logos data.');
        }
      } catch (e) {
        alert('Invalid JSON for Logos data.');
      }
    };

    if (!isAuthenticated) {
        return (
            <div className="min-h-screen bg-base-dark flex items-center justify-center">
                <div className="w-full max-w-md p-8 space-y-8 bg-base-medium rounded-lg shadow-lg">
                    <h2 className="text-2xl font-bold text-center text-text-primary">Admin Login</h2>
                    <form onSubmit={handleLogin} className="space-y-6">
                        <input type="email" value={email} onChange={e => setEmail(e.target.value)} placeholder="Email" required className="w-full px-3 py-2 text-text-primary bg-base-light rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary" />
                        <input type="password" value={password} onChange={e => setPassword(e.target.value)} placeholder="Password" required className="w-full px-3 py-2 text-text-primary bg-base-light rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary" />
                        <button type="submit" className="w-full py-2 px-4 bg-brand-primary text-white font-semibold rounded-md hover:bg-opacity-90 transition-colors">Login</button>
                        {error && <p className="text-red-500 text-sm text-center">{error}</p>}
                    </form>
                </div>
            </div>
        );
    }

    return (
        <div className="min-h-screen bg-base-dark text-text-primary p-8">
            <div className="max-w-4xl mx-auto">
                <div className="flex justify-between items-center mb-8">
                    <h1 className="text-3xl font-bold">Admin Panel</h1>
                    <button onClick={handleLogout} className="py-2 px-4 bg-red-600 text-white font-semibold rounded-md hover:bg-red-700 transition-colors">Logout</button>
                </div>

                <div className="space-y-8">
                    <div>
                        <h2 className="text-xl font-semibold mb-2">About Me Data</h2>
                        <textarea value={aboutMeJson} onChange={e => setAboutMeJson(e.target.value)} rows="15" className="w-full p-2 bg-base-light rounded-md font-mono text-sm"></textarea>
                        <button onClick={handleSaveAboutMe} className="mt-2 py-2 px-4 bg-brand-primary text-white font-semibold rounded-md hover:bg-opacity-90 transition-colors">Save About Me</button>
                    </div>

                    <div>
                        <h2 className="text-xl font-semibold mb-2">Hero Projects Data</h2>
                        <textarea value={heroProjectsJson} onChange={e => setHeroProjectsJson(e.target.value)} rows="15" className="w-full p-2 bg-base-light rounded-md font-mono text-sm"></textarea>
                        <button onClick={handleSaveHeroProjects} className="mt-2 py-2 px-4 bg-brand-primary text-white font-semibold rounded-md hover:bg-opacity-90 transition-colors">Save Hero Projects</button>
                    </div>
                  
                    <div>
                        <h2 className="text-xl font-semibold mb-2">Logos Data</h2>
                        <textarea value={logosJson} onChange={e => setLogosJson(e.target.value)} rows="15" className="w-full p-2 bg-base-light rounded-md font-mono text-sm"></textarea>
                        <button onClick={handleSaveLogos} className="mt-2 py-2 px-4 bg-brand-primary text-white font-semibold rounded-md hover:bg-opacity-90 transition-colors">Save Logos</button>
                    </div>

                    <div>
                      <h2 className="text-xl font-semibold mb-2">Actions</h2>
                      <button onClick={resetToDefaults} className="py-2 px-4 bg-yellow-500 text-base-dark font-semibold rounded-md hover:bg-yellow-600 transition-colors">Reset Local Data to Defaults</button>
                    </div>
                </div>
            </div>
        </div>
    );
};

const BackToTopButton = () => {
  const [isVisible, setIsVisible] = useState(false);
  const { setHoverState } = useCursorHover();

  const toggleVisibility = () => {
    if (window.pageYOffset > 300) setIsVisible(true);
    else setIsVisible(false);
  };

  const scrollToTop = () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  useEffect(() => {
    window.addEventListener('scroll', toggleVisibility);
    return () => window.removeEventListener('scroll', toggleVisibility);
  }, []);

  const ArrowUpIcon = ({ className = "h-6 w-6" }) => (
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className={className}>
      <path strokeLinecap="round" strokeLinejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" />
    </svg>
  );

  return (
    <button
      type="button"
      onClick={scrollToTop}
      onMouseEnter={() => setHoverState({ isHovering: true, text: 'TOP' })}
      onMouseLeave={() => setHoverState({ isHovering: false })}
      className={`fixed bottom-8 left-8 z-50 p-3 rounded-full bg-base-medium text-text-primary shadow-lg transition-opacity hover:bg-base-light ${ isVisible ? 'opacity-100' : 'opacity-0 pointer-events-none' }`}
      aria-label="Go to top"
    >
      <ArrowUpIcon />
    </button>
  );
};

const FloatingContactButton = () => {
  const { aboutMe } = useContent();
  const { setHoverState } = useCursorHover();
  const [isHovered, setIsHovered] = useState(false);
  const [hoveredHalf, setHoveredHalf] = useState(null); // 'top', 'bottom', or null

  const STIFFNESS = 0.05;
  const DAMPING = 0.85;

  const physicsRef = useRef({
    currentAngle: 0,
    targetAngle: 0,
    velocity: 0,
  });
  
  const lastScrollY = useRef(0);
  const scrollTimeout = useRef(null);
  const animationFrame = useRef(null);
  const circleRef = useRef(null);

  useEffect(() => {
    const animate = () => {
      const phys = physicsRef.current;
      const force = (phys.targetAngle - phys.currentAngle) * STIFFNESS;
      phys.velocity = (phys.velocity + force) * DAMPING;
      phys.currentAngle += phys.velocity;

      if (circleRef.current) {
        circleRef.current.style.transform = `rotate(${phys.currentAngle}deg)`;
      }

      if (Math.abs(phys.velocity) > 0.01 || Math.abs(phys.targetAngle - phys.currentAngle) > 0.01) {
        animationFrame.current = requestAnimationFrame(animate);
      } else {
        phys.currentAngle = phys.targetAngle;
        if (circleRef.current) {
           circleRef.current.style.transform = `rotate(${phys.currentAngle}deg)`;
        }
        animationFrame.current = null;
      }
    };
    
    const startAnimation = () => {
      if (animationFrame.current === null) {
        animationFrame.current = requestAnimationFrame(animate);
      }
    };

    const handleScroll = () => {
      const scrollY = window.scrollY;
      const delta = scrollY - lastScrollY.current;
      lastScrollY.current = scrollY;
      
      const rotationAmount = Math.max(-20, Math.min(20, delta * 0.5));
      physicsRef.current.targetAngle += rotationAmount;
      
      physicsRef.current.targetAngle %= 360;

      clearTimeout(scrollTimeout.current);
      scrollTimeout.current = setTimeout(() => {
        physicsRef.current.targetAngle = 0;
        startAnimation();
      }, 1000);

      startAnimation();
    };

    window.addEventListener('scroll', handleScroll, { passive: true });
    
    return () => {
      window.removeEventListener('scroll', handleScroll);
      clearTimeout(scrollTimeout.current);
      if(animationFrame.current) cancelAnimationFrame(animationFrame.current);
    };
  }, []);

  const lightBlue = '#38bdf8'; // sky-400
  const lightGray = '#f3f4f6'; // gray-100 (10% gray)
  
  let bgStyle = { transition: 'background .3s ease' };
  
  if (isHovered) {
    if (hoveredHalf === 'top') {
      bgStyle.background = `linear-gradient(to bottom, ${lightBlue} 50%, ${lightGray} 50%)`;
    } else if (hoveredHalf === 'bottom') {
      bgStyle.background = `linear-gradient(to bottom, ${lightGray} 50%, ${lightBlue} 50%)`;
    } else {
      bgStyle.backgroundColor = lightBlue;
    }
  } else {
    bgStyle.backgroundColor = lightBlue;
  }

  return (
    <div 
      className="fixed bottom-8 right-8 z-50"
      onMouseEnter={() => {
        setIsHovered(true);
        setHoverState({ isHovering: true });
      }}
      onMouseLeave={() => {
        setIsHovered(false);
        setHoveredHalf(null);
        setHoverState({ isHovering: false });
      }}
    >
      <div 
        className={`relative rounded-full flex items-center justify-center shadow-2xl transition-all duration-500 ease-in-out ${
          isHovered 
            ? 'w-36 h-36' 
            : 'w-16 h-16'
        }`}
        style={bgStyle}
      >
        {/* Inner Content */}
        <div className="relative w-full h-full flex flex-col items-center justify-center text-center overflow-hidden rounded-full">
            {/* HELLo text */}
            <div className={`absolute inset-0 flex items-center justify-center transition-all duration-300 ${isHovered ? 'opacity-0 scale-50' : 'opacity-100 delay-200'}`}>
                <div ref={circleRef}>
                  <span className="text-lg font-black text-white">HELLo</span>
                </div>
            </div>

            {/* Hover Content: Image and Links */}
            <div className={`absolute inset-0 flex flex-col items-center justify-center transition-all duration-300 ${isHovered ? 'opacity-100' : 'opacity-0'}`}>
                <img 
                    src="https://firebasestorage.googleapis.com/v0/b/port-82839.firebasestorage.app/o/Assets%2FMisc%2FPHONEmail.svg?alt=media&token=d750a4d3-77b4-4262-8d80-0bde4e256ab9" 
                    alt="Contact Icons"
                    className="h-[75%] w-auto pointer-events-none"
                />
                <a
                  href={`tel:${aboutMe.phone.replace(/[^\d]/g, '')}`}
                  onMouseEnter={() => setHoveredHalf('top')}
                  aria-label={`Call ${aboutMe.phone}`}
                  className="absolute top-0 left-0 w-full h-1/2"
                ></a>
                <a
                  href={`mailto:${aboutMe.email}`}
                  onMouseEnter={() => setHoveredHalf('bottom')}
                  aria-label={`Email ${aboutMe.email}`}
                  className="absolute bottom-0 left-0 w-full h-1/2"
                ></a>
            </div>
        </div>
      </div>
    </div>
  );
};

const Footer = () => {
  const { aboutMe } = useContent();
  return (
    <footer className="bg-base-medium border-t border-base-light">
      <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-8"><div className="flex flex-col md:flex-row justify-between items-center text-center md:text-left">
        <div className="mb-4 md:mb-0"><p className="text-sm text-text-secondary">&copy; {new Date().getFullYear()} David Gaines. All rights reserved.</p><p className="text-xs text-text-tertiary">Built with passion & pixels.</p></div>
        <div className="flex items-center space-x-4">
          <a href={aboutMe.linkedInUrl} target="_blank" rel="noopener noreferrer" className="text-text-secondary hover:text-brand-primary transition-colors"><LinkedInIcon className="w-6 h-6"/></a>
          <a href={`mailto:${aboutMe.email}`} className="text-text-secondary hover:text-brand-primary transition-colors text-sm font-medium">{aboutMe.email}</a>
        </div>
      </div></div>
    </footer>
  );
};

class ErrorBoundary extends Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false, error: null };
  }
  static getDerivedStateFromError(error) {
    return { hasError: true, error };
  }
  componentDidCatch(error, errorInfo) {
    console.error("Uncaught error:", error, errorInfo);
  }
  render() {
    if (this.state.hasError) {
      return (
        <div className="min-h-screen bg-base-dark flex items-center justify-center text-center text-text-primary p-4">
          <div>
            <h1 className="text-3xl font-bold text-red-500">Something went wrong.</h1>
            <p className="mt-4">An unexpected error occurred. Please try refreshing the page.</p>
            <details className="mt-4 text-left bg-base-medium p-4 rounded-lg">
              <summary>Error Details</summary>
              <pre className="mt-2 text-sm text-red-400 overflow-auto">
                {this.state.error && this.state.error.toString()}
              </pre>
            </details>
          </div>
        </div>
      );
    }
    return this.props.children;
  }
}

const App = () => {
  const { path } = useRouter();
  
  let ComponentToRender;
  if (path === '#/' || path === '') {
    ComponentToRender = HomePage;
  } else if (path.startsWith('#/project/')) {
    ComponentToRender = ProjectDetailPage;
  } else if (path === '#/about') {
    ComponentToRender = AboutPage;
  } else if (path === '#/admin') {
    ComponentToRender = AdminPage;
  } else {
    ComponentToRender = () => (
      <div className="min-h-screen flex flex-col items-center justify-center text-center">
        <h1 className="text-4xl font-bold">404 - Not Found</h1>
        <a href="#/" className="mt-4 text-brand-primary hover:underline">Go back home</a>
      </div>
    );
  }
  
  const showContactButton = !path.startsWith('#/admin');

  return (
    <ErrorBoundary>
      <CursorHoverProvider>
        <CustomCursor />
        <div className="flex flex-col min-h-screen">
          <Header />
          <main className="flex-grow">
            <ComponentToRender />
          </main>
          <Footer />
          {showContactButton && (
            <>
              <FloatingContactButton />
              <BackToTopButton />
            </>
          )}
        </div>
      </CursorHoverProvider>
    </ErrorBoundary>
  );
};

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <ContentProvider>
      <App />
    </ContentProvider>
  </React.StrictMode>
);

    </script>
  </body>
</html>